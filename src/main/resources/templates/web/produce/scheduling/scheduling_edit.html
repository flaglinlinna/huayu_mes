<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head th:include="layout :: htmlhead" th:with="title='排产信息'">
<meta charset="utf-8"></meta>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div style="margin: 10px">
        <form id="editForm" class="layui-form layui-form-pane" method="post" action="" style="margin-top: 5px;">
            <input type="text" id="id" name="id" hidden="true">
            <div class="layui-collapse" lay-accordion="">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">编辑</h2>
                    <div class="layui-colla-content layui-show">
                        <div class="layui-form-item" style="margin-bottom: 0px">
                            <div class="layui-inline">
                                <label class="layui-form-label">制令单号</label>
                                <div class="layui-input-inline">
                                    <!--颜色：#EBEBE4、#F2F2F2-->
                                    <input type="text" id="taskNo" name="taskNo" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label" >工单单号</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="prodNo" name="prodNo" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label" >生产状态</label>
                                <div class="layui-input-inline">
                                   <input type="text" id="produceState" name="produceState" readonly class="layui-input" style="background-color: #F2F2F2;">
                                   <!-- <select id="produceState" name='produceState' disabled  class="layui-input">
                                        <option value=""></option>
                                        <option value="待产">待产</option>
                                        <option value="生产">生产</option>
                                        <option value="完工">完工</option>
                                        <option value="停工">停工</option>
                                    </select>-->
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">物料编码</label>
                                <div class="layui-input-inline">
                                    <!--<input type="text" id="itemNo" name="itemNo" class="layui-input">-->
                                  <!--  <select id="itemId" name='itemId' lay-filter="itemId" disabled lay-search class="layui-input">
                                        <option value=""></option>
                                    </select> --> 
                                    <input type="text" id="itemId" name="itemId" readonly style="background-color: #F2F2F2;" class="layui-input">
                                    
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">物料描述</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="itemName" name="itemName" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">组合</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="groupNo" name="groupNo" readonly style="background-color: #F2F2F2;" autocomplete="off" placeholder="" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">客户</label>
                                <div class="layui-input-inline">
                                    <!--<input type="text" id="custName" name="custName" autocomplete="off" placeholder="" class="layui-input">-->
                                    <!-- <select id="custId" name='custId' disabled class="layui-input" lay-event="custId" lay-search>
                                        <option value=""></option>
                                    </select>-->
                                    <input type="text" id="custName" name="custName" readonly style="background-color: #F2F2F2;" autocomplete="off" placeholder="" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">组长</label>
                                <div class="layui-input-inline">
                                    <!--<input type="text" id="linerName" name="linerName" autocomplete="off" placeholder="" class="layui-input">-->
                                   <!-- <select id="linerName" disabled name='linerName' lay-search style="background-color: #F2F2F2;" class="layui-input">
                                        <option value=""></option>
                                    </select>-->
                                     <input type="text" id="linerName" name="linerName" readonly style="background-color: #F2F2F2;" autocomplete="off" placeholder="" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">生产日期</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="prodDate" disabled style="background-color: #F2F2F2;" name="prodDate" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">部门</label>
                                <div class="layui-input-inline">
                                    <!--<input type="text" id="deptName" name="deptName" autocomplete="off" placeholder="" class="layui-input">-->
                                    <!--<select id="deptId" name='deptId' disabled lay-search class="layui-input">
                                        <option value=""></option>
                                    </select>-->
                                     <input type="text" id="deptId" name="deptId" readonly style="background-color: #F2F2F2;" autocomplete="off" placeholder="" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">班次</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="classNo" name="classNo" autocomplete="off" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">计划数量</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="qtyPlan" name="qtyPlan" autocomplete="off" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">完工数</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="qytDone" name="qytDone" autocomplete="off" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">完工率</label>
                                <div class="layui-input-inline">
                                    <input type="text" id="rateDone" name="rateDone" autocomplete="off" readonly style="background-color: #F2F2F2;" class="layui-input">
                                </div>
                            </div>
                        </div>

                        <!-- <div class="layui-form-item" style="margin-bottom: 0px;text-align: center;">
                            <button type="button" class="layui-btn layui-btn-sm" lay-submit="" lay-filter="editBtn">保存</button>
                        </div>-->
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div id="setClientProc" class="layer_self_wrap"
         style=" display: none;">
        <form id="clientProcForm" class="layui-form layui-form-pane"
              lay-filter="clientProcForm" method="post" action=""
              style="margin: 20px;">
            <input id="pageNum" type="hidden" name="pageNum" />
            <input id="taskNo2"  type="hidden" name="taskNo" />

            <input type="hidden" name="itemId" />

            <div class="layui-form-item">
                <label class="layui-form-label layui-required">模板名称</label>
                <div class="layui-input-inline">
                    <select id="fdemoName" name="fdemoName" lay-filter="fdemoName"
                            lay-search>
                    </select>
                </div>
            </div>
            <table id="procList" lay-filter="procTable" class="layui-table" ></table>
            <div class="layui-form-item">
                <div class="layui-input-block" >
                    <button class="layui-btn layui-btn-sm" lay-submit=""
                            lay-filter="addSubmit2">提交</button>
                    <button type="reset"
                            class="layui-btn layui-btn-sm layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>


    <!--<script type="text/html" id="add_statusTpl">-->
        <!--<input type="checkbox" name="jobAttr" value="1" lay-skin="primary" lay-filter="isAddStatusTpl"  />-->
    <!--</script>-->


    <div class="layui-tab layui-tab-brief" lay-filter="tabFilter">
        <ul class="layui-tab-title">
            <li lay-id="add" class="layui-this">工艺维护</li>
            <li lay-id="list">工单组件</li>
            <li lay-id="list">上线人员清单</li>
            <li lay-id="list4">投料清单</li>
            <li lay-id="list5">产出送检</li>
            <li lay-id="list6">品质检验</li>
            <li lay-id="list7">生产异常</li>
        </ul>
        <div class="layui-tab-content" style="height: 100px; display: block">
            <div class="layui-tab-item layui-show">
                <!--工艺维护列表-->
                <table id="iList" lay-filter="iTable"></table>
                <form style="margin-bottom: 0px;text-align: center;">
                    <!--<button type="button" class="layui-btn layui-btn-sm" lay-submit="" lay-filter="saveProcess">保存工艺</button>-->

                    <button type="button" class="layui-btn layui-btn-sm" lay-submit="" lay-filter="updateProcess" onclick="openProc()">更新工艺</button>
                </form>
                <script type="text/html" id="statusTpl">
                    {{# if(d.JOB_ATTR==1){ }}
                    <input type="checkbox" name="{{d.procNo}}" value="{{d.id}}" lay-skin="primary" lay-filter="isStatusTpl" disabled checked="checked" />
                    {{#  } else { }}
                    <input type="checkbox" name="{{d.procNo}}" value="{{d.id}}" lay-skin="primary"  disabled lay-filter="isStatusTpl"/>
                    {{#  } }}
                </script>

                <script type="text/html" id="statusTp2">
                    {{# if(d.jobAttr==1){ }}
                    <input type="checkbox" name="{{d.procNo}}" value="{{d.id}}" lay-skin="primary" lay-filter="isStatusTpl" disabled checked="checked" />
                    {{#  } else { }}
                    <input type="checkbox" name="{{d.procNo}}" value="{{d.id}}" lay-skin="primary"  lay-filter="isStatusTpl" disabled />
                    {{#  } }}
                </script>


                <script type="text/html" id="optBar">
                    {{#  if(d.isCheck==1){ }}
                    <button type="button" class="layui-btn layui-btn-xs" id="edit1" lay-event="edit1">编辑</button>
                    {{#  } else { }}
                    <!--<button type="button" class="layui-btn layui-btn-xs" lay-event="edit1" disabled="true">编辑</button>-->
                    {{#  } }}
                </script>
            </div>
            <div class="layui-tab-item">
                <!--工单组件列表-->
                <table id="iList2" lay-filter="iTable2"></table>
                <script type="text/html" id="optBar2">
                    <a class="layui-btn layui-btn-xs" lay-event="edit2">编辑</a>
                </script>
            </div>
            <div class="layui-tab-item">
                <!--上线人员清单-->
                <table id="iList3" lay-filter="iTable3"></table>
            </div>
            <div class="layui-tab-item">
                <!--投料清单-->
                <table id="iList4" lay-filter="iTable4"></table>
            </div>
            <div class="layui-tab-item">
                <!--产出送检-->
                <table id="iList5" lay-filter="iTable4"></table>
            </div>
            <div class="layui-tab-item">
                <!--品质检验-->
                <table id="iList6" lay-filter="iTable4"></table>
            </div>
            <div class="layui-tab-item">
                <!--生产异常-->
                <button class="layui-btn layui-btn-sm" onclick="addProdErr()" >新增异常信息</button>
                <table id="iList7" lay-filter="iTable5"></table>
            </div>
        </div>
    </div>

    <!--编辑工艺维护-->
    <div id="editDiv1" class="layer_self_wrap" style="width:500px;height:300px;display:none;">
        <form id="editForm1" class="layui-form layui-form-pane"  lay-filter="editForm1" method="post" action="" style="margin-top: 20px;">
            <input id="processId1" type="hidden" name="id"/>
            <input id="mid1" type="hidden" name="mid"/>
            <div class="layui-form-item">
                <label class="layui-form-label">工序顺序</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input id="procOrder1" name="procOrder"  style="background-color: #F2F2F2;"  readonly autocomplete="off" class="layui-input" type="text"/>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">过程属性</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input type="checkbox" id="jobAttr1" name="jobAttr" disabled value="1" lay-skin="primary" checked="" />
                    <!--<input id="jobAttr1" name="jobAttr" autocomplete="off" class="layui-input" type="text"/>-->
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">作业员</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <!--<select id="empId1" name="empId" lay-search class="layui-input">-->
                        <!--<option value=""></option>-->
                    <!--</select>-->
                    <input id="empId1" name="empId1" lay-filter="empId1" readonly autocomplete="off"
                           class="layui-input" type="text" />
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">工序编号</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input id="procNo1" style="background-color: #F2F2F2;"  name="procNo" readonly class="layui-input" type="text"/>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">工序名称</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input id="procName1" style="background-color: #F2F2F2;"  name="procName"  readonly class="layui-input" type="text"/>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block" style="margin-left: 10px;">
                    <button class="layui-btn layui-btn-sm"  lay-submit="" lay-filter="editSubmit1">提交</button>
                </div>
            </div>
        </form>
    </div>

    <!--编辑工单组件-->
    <div id="editDiv2" class="layer_self_wrap" style="width:500px;height:250px;display:none;">
        <form id="editForm2" class="layui-form layui-form-pane"  lay-filter="editForm2" method="post" action="" style="margin-top: 20px;">
            <input id="itemId2" type="hidden" name="id"/>
            <input id="mid2" type="hidden" name="mid"/>
            <input id="empId" type="hidden" name="empId"/>
            <div class="layui-form-item">
                <label class="layui-form-label">作业员</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <!--<select id="empId2" name="empId" lay-search class="layui-input">-->
                        <!--<option value=""></option>-->
                    <!--</select>-->

                    <input id="empId2" name="empId2" readonly lay-filter="empId2" autocomplete="off"
                           class="layui-input" type="text" />
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">物料编号</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input id="itemNo2" name="itemNo" readonly class="layui-input" type="text"/>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">物料描述</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input id="itemName2" name="itemName" readonly class="layui-input" type="text"/>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">用量</label>
                <div class="layui-input-inline" style="width: 350px;">
                    <input id="itemQty2" name="itemQty" readonly class="layui-input" type="text"/>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block" style="margin-left: 10px;">
                    <button class="layui-btn layui-btn-sm"  lay-submit="" lay-filter="editSubmit2">提交</button>
                </div>
            </div>
        </form>
    </div>


    <!--添加或编辑异常工时信息-->
    <div id="setAbnormalHours" class="layer_self_wrap"
         style="width: 750px; display: none; margin: 20px;">
        <form id="cardForm" class="layui-form layui-form-pane"
              lay-filter="cardForm" method="post" action=""
              style="margin-top: 20px;">
            <!--<input type="hidden"  name="empId"  id="empId7"  >-->
            <div class="layui-form-item">
                <label class="layui-form-label layui-required">异常类型</label>
                <div class="layui-input-inline" style="width:26%;">
                    <select lay-verify="required" name="ftype" lay-filter="ftype" placeholder="请选择异常类型">
                        <option value="开始">开始</option>
                        <option value="解除">解除</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label layui-required">制令单</label>
                <div class="layui-input-inline" style="width:76%;">
                    <input type="text" name="taskNo" placeholder="请选择"
                           autocomplete="off" class="layui-input" readonly="readonly"
                           lay-verify="required" disabled  style="background: #efefef;" id="taskNo7">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">物料描述</label>
                <div class="layui-input-inline" style="width:76%;">
                    <input type="text" class="layui-input" name="itemName" disabled
                           style="background: #efefef;" id="itemName7">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">物料编号</label>
                <div class="layui-input-inline" style="width:76%;">
                    <input type="text" class="layui-input" name="itemNo" disabled
                           style="background: #efefef;" id="itemNo">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">客户简称</label>
                <div class="layui-input-inline" style="width:30%;">
                    <input type="text" class="layui-input" name="custNameS" disabled
                           style="background: #efefef;" id="custNameS">
                </div>
                <label class="layui-form-label">线长</label>
                <div class="layui-input-inline" style="width:30%;">
                    <input type="text" class="layui-input" name="linerName" disabled
                           style="background: #efefef;" id="linerName7">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label layui-required">登记时间</label>
                <div class="layui-input-inline" style="width:30%;">
                    <input type="text" class="layui-input" name="ftime"
                           placeholder="请输入开始时间" lay-verify="required" id="ftime">
                </div>
                <label id="time_label" style="display:none;" class="layui-form-label layui-required">时长(分钟)</label>
                <div id="time_div" class="layui-input-inline" style="width:30%;display:none;">
                    <input class="layui-input" name="ftimeLong" lay-verify="" id="ftimeLong">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label layui-required" id="reason_label">异常原因</label>
                <div id="reason_div" class="layui-input-inline" style="width:30%;">
                    <!--<input type="text" class="layui-input" name="forReason" -->
                    <!--lay-verify="required" id="forReason" placeholder="请输入异常原因">-->
                    <select id="forReason" lay-verify="required" name="forReason" lay-filter="forReason" placeholder="请选择异常原因"></select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">异常描述</label>
                <div class="layui-input-inline" style="width:76%;">
					<textarea id="description" name="description" lay-verify=""
                              placeholder="请输入内容" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block" style="margin-left: 10px;">
                    <button class="layui-btn layui-btn-sm" lay-submit=""
                            lay-filter="addSubmit7">提交</button>
                    <button type="reset"
                            class="layui-btn layui-btn-sm layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>

    <script th:inline="javascript">
        var id = [[${id}]];
        var qty = [[${qty}]];
        var rate = [[${rate}]];
        var mapData = [[${mapData}]];
        var scheduling = mapData ? mapData.scheduling : null;
        var itemList = mapData ? mapData.itemList : null;
        var clientList = mapData ? mapData.clientList : null;
        var lineList = mapData ? mapData.lineList : null;
        var orgList = mapData ? mapData.orgList : null;
        var employeeList = mapData ? mapData.employeeList : null;
    </script>
    <script th:src="@{/js/web/produce/scheduling/scheduling_edit.js}" src="/js/web/produce/scheduling/scheduling_edit.js"></script>
</div>
</body>
</html>
